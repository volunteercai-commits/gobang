# 五子棋React游戏

一个功能完整的五子棋游戏，使用React + TypeScript开发，支持人机对战和人人对战模式。

## 🎮 游戏特性

### 核心功能
- ✅ **15×15标准五子棋棋盘** - 符合国际标准
- ✅ **人机对战模式** - 智能AI对手
- ✅ **人人对战模式** - 双人对战
- ✅ **智能AI算法** - 多层级威胁检测
- ✅ **悔棋功能** - 每人每局一次悔棋机会
- ✅ **计分系统** - 完整的胜负统计
- ✅ **响应式设计** - 完美支持移动端

### AI智能特性
- 🧠 **开局策略优化** - 天元开局，智能布局
- 🎯 **威胁检测系统** - 活三、双三、四三、双四检测
- 🛡️ **防守反击逻辑** - 攻守兼备的AI策略
- ⚫⚪ **执黑/执白策略** - 不同颜色采用不同策略
- ⏱️ **思考时间控制** - 模拟真实对局体验

### UI/UX特性
- 🎨 **Canvas绘制** - 流畅的视觉效果
- 🌈 **渐变色彩** - 现代化的视觉设计
- 📱 **移动端优化** - 完美适配各种屏幕尺寸
- ✨ **动画效果** - 棋子落子动画和预览
- 🎯 **坐标系统** - 清晰的棋盘坐标标识

## 🚀 快速开始

### 环境要求
- Node.js >= 14.0.0
- npm >= 6.0.0

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm start
```

访问 [http://localhost:3000](http://localhost:3000) 查看游戏。

### 构建生产版本
```bash
npm run build
```

## 🎯 游戏规则

### 基本规则
1. 黑棋先手，白棋后手
2. 在15×15的棋盘上轮流落子
3. 率先形成五子连珠者获胜
4. 连珠可以是横向、纵向或对角线

### 特殊规则
- **悔棋规则**: 每人每局只能悔棋一次，悔棋时会同时移除对手的最后一步
- **计分规则**: 
  - 正常获胜得1分
  - 悔棋后获胜不得分
  - 对手悔棋后获胜得2分

## 🤖 AI算法详解

### 威胁等级系统
1. **五连** (10000分) - 直接获胜
2. **活四** (1000分) - 下一步必胜
3. **冲四** (100分) - 被阻挡的四连
4. **活三** (100分) - 可以形成活四的三连
5. **眠三** (10分) - 被阻挡的三连
6. **活二** (10分) - 可以形成活三的二连
7. **眠二** (1分) - 被阻挡的二连

### 策略特点
- **执黑策略**: 以攻为主，积极寻找攻击机会
- **执白策略**: 以守为攻，注重防守反击
- **开局优化**: 天元开局，根据对手回应调整策略
- **中局计算**: 多层级威胁检测，优先阻止对手威胁

## 📁 项目结构

```
src/
├── components/          # React组件
│   ├── ChessBoard.tsx  # 棋盘组件
│   ├── GameControls.tsx # 游戏控制组件
│   ├── GameStatus.tsx  # 游戏状态组件
│   └── WinnerAnnouncement.tsx # 胜利提示组件
├── hooks/              # 自定义Hooks
│   └── useGameState.ts # 游戏状态管理
├── types/              # TypeScript类型定义
│   └── index.ts        # 游戏相关类型
├── utils/              # 工具函数
│   ├── gameLogic.ts    # 游戏逻辑
│   ├── aiEngine.ts     # AI引擎
│   └── aiDecision.ts   # AI决策算法
├── styles/             # 样式文件
│   └── App.css         # 主样式文件
├── App.tsx             # 主应用组件
└── index.tsx           # 应用入口
```

## 🛠️ 技术栈

- **前端框架**: React 18
- **开发语言**: TypeScript
- **构建工具**: Create React App
- **图形渲染**: Canvas API
- **状态管理**: React Hooks
- **样式方案**: CSS3 + 响应式设计

## 🚀 部署指南

### 部署脚本说明

项目提供了三个部署相关的脚本：

| 脚本文件 | 用途 | 说明 |
|---------|------|------|
| `deploy.sh` | 完整部署脚本 | 自动构建、上传、配置nginx |
| `deploy-simple.sh` | 简化部署脚本 | 只构建项目，生成部署包 |
| `test-build.sh` | 构建测试脚本 | 测试构建结果和本地服务器 |

### 本地测试

```bash
# 构建项目
npm run build

# 测试构建结果
./test-build.sh
```

### 完整自动部署（推荐）

```bash
# 运行完整部署脚本
./deploy.sh
```

**功能包括:**
- ✅ 自动安装依赖
- ✅ 构建React项目
- ✅ 上传到服务器
- ✅ 配置nginx
- ✅ 验证部署结果

### 简化部署

```bash
# 生成部署包
./deploy-simple.sh

# 手动上传到服务器
scp gobang-react-build.tar.gz caixy.icu:/tmp/

# 在服务器上解压
ssh caixy.icu "mkdir -p /var/www/html/gobang-react && tar -xzf /tmp/gobang-react-build.tar.gz -C /var/www/html/gobang-react/"
```

### 部署前准备

1. **确保项目可以正常构建**
   ```bash
   npm install
   npm run build
   ```

2. **检查服务器连接**
   ```bash
   ssh caixy.icu "echo '服务器连接正常'"
   ```

3. **确保服务器权限**
   - 可以写入 `/var/www/html/`
   - 可以修改nginx配置
   - 可以重载nginx服务

### 访问地址

部署完成后，可以通过以下地址访问：
- 域名: `http://caixy.icu/gobang-react`
- IP地址: `http://[服务器IP]/gobang-react`

### 故障排除

#### 1. 构建失败
```bash
# 清理并重新安装依赖
rm -rf node_modules package-lock.json
npm install
npm run build
```

#### 2. 上传失败
```bash
# 检查SSH连接
ssh caixy.icu "echo '连接正常'"

# 检查服务器权限
ssh caixy.icu "ls -la /var/www/html/"
```

#### 3. nginx配置问题
```bash
# 检查nginx配置
ssh caixy.icu "nginx -t"

# 查看nginx错误日志
ssh caixy.icu "tail -f /var/log/nginx/error.log"
```

#### 4. 页面无法访问
```bash
# 检查文件是否存在
ssh caixy.icu "ls -la /var/www/html/gobang-react/"

# 检查nginx状态
ssh caixy.icu "systemctl status nginx"
```

### 更新部署

当代码有更新时，只需重新运行部署脚本：

```bash
./deploy.sh
```

脚本会自动：
1. 拉取最新代码
2. 重新构建项目
3. 上传新文件
4. 重载nginx

## 🎨 界面预览

### 桌面端
- 现代化渐变背景
- 木质纹理棋盘
- 立体棋子效果
- 清晰的状态提示

### 移动端
- 自适应布局
- 触摸优化
- 紧凑的按钮设计
- 流畅的交互体验

## 🎮 游戏模式

### 人人对战 (PVP)
- 两个玩家轮流下棋
- 支持悔棋功能
- 实时状态显示

### 人机对战 (PVC)
- 与智能AI对战
- 可选择执黑或执白
- 完整的计分系统
- AI思考时间模拟

## 🔧 开发说明

### 代码结构
- **组件化设计**: 每个功能模块独立组件
- **类型安全**: 完整的TypeScript类型定义
- **状态管理**: 使用React Hooks管理复杂状态
- **算法分离**: AI逻辑与UI逻辑完全分离

### 性能优化
- **Canvas渲染**: 高效的图形绘制
- **事件优化**: 防抖和节流处理
- **内存管理**: 及时清理定时器和事件监听
- **代码分割**: 按需加载减少初始包大小

## 📱 移动端适配

- **响应式布局**: 适配各种屏幕尺寸
- **触摸优化**: 支持触摸操作
- **性能优化**: 针对移动设备的性能调优
- **UI适配**: 移动端友好的界面设计

## 🐛 已知问题

- 暂无已知问题

## 🔮 未来计划

- [ ] 添加音效支持
- [ ] 实现游戏回放功能
- [ ] 添加更多AI难度等级
- [ ] 支持在线对战
- [ ] 添加游戏统计功能

## 📄 许可证

MIT License

## 👨‍💻 作者

AI Assistant

## 🙏 致谢

感谢所有为这个项目提供灵感和帮助的开发者们！

---

**享受五子棋的乐趣！** 🎯